# Server Configuration
server.port=8080
server.servlet.context-path=/

# Database Configuration
spring.datasource.url=jdbc:postgresql://localhost:5432/ppt2video_poc
spring.datasource.username=ppt2video_db_user
spring.datasource.password=${PPT2VIDEOPOC_DB_PWD}
spring.datasource.driver-class-name=org.postgresql.Driver

# JPA Configuration
spring.jpa.hibernate.ddl-auto=none
spring.jpa.show-sql=false
spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.PostgreSQLDialect
spring.jpa.properties.hibernate.format_sql=true
spring.jpa.properties.hibernate.use_sql_comments=true

# Flyway Configuration
spring.flyway.enabled=true
spring.flyway.baseline-on-migrate=true
spring.flyway.locations=classpath:db/migration
spring.flyway.validate-on-migrate=true

# Connection Pool Configuration (HikariCP)
spring.datasource.hikari.maximum-pool-size=20
spring.datasource.hikari.minimum-idle=5
spring.datasource.hikari.idle-timeout=300000
spring.datasource.hikari.connection-timeout=20000
spring.datasource.hikari.max-lifetime=1200000

# Jackson JSON Configuration
spring.jackson.default-property-inclusion=non_null
spring.jackson.serialization.write-dates-as-timestamps=false
spring.jackson.deserialization.fail-on-unknown-properties=false

# File Upload Configuration
spring.servlet.multipart.enabled=true
spring.servlet.multipart.max-file-size=250MB
spring.servlet.multipart.max-request-size=250MB

# Application File Upload Limits
app.upload.max-file-size=250MB
app.upload.max-file-size-bytes=262144000

# Narrative Duration Configuration
app.narrative.duration.intro.min=30
app.narrative.duration.intro.max=45
app.narrative.duration.separator.min=8
app.narrative.duration.separator.max=12
app.narrative.duration.thank-you.min=10
app.narrative.duration.thank-you.max=20
app.narrative.duration.content.min=15
app.narrative.duration.content.max=60
app.narrative.density.low-threshold=0.3
app.narrative.density.high-threshold=0.7

# Logging Configuration
logging.level.ai.bluefields.ppt2video=INFO
logging.level.ai.bluefields.ppt2video.service.ai.OpenAIService=TRACE
logging.level.org.springframework.web=INFO
logging.level.org.springframework.ai=DEBUG
logging.level.org.springframework.ai.openai=TRACE
logging.level.org.springframework.retry=DEBUG
logging.level.org.hibernate.SQL=OFF
logging.level.org.hibernate.type.descriptor.sql.BasicBinder=OFF

# Suppress noisy Spring AI auto-configuration warnings
logging.level.org.springframework.ai.model.tool.autoconfigure.ToolCallingAutoConfiguration=WARN

# Application Configuration
app.storage.base-path=./storage
app.storage.presentations-path=${app.storage.base-path}/presentations

# Rendering Configuration
app.rendering.default-width=1920
app.rendering.default-height=1080
app.rendering.default-renderer=ASPOSE

# Renderer priority (for slide image generation)
app.slide-rendering.renderer-priority=ASPOSE,MSGRAPH,ENHANCED_POI,DEFAULT_POI

# Parser priority (for PowerPoint content extraction)
app.parser.priority=POI,ASPOSE

# Aspose Configuration (when available/licensed)
app.slide-rendering.aspose.enabled=true
app.slide-rendering.aspose.license-path=${ASPOSE_LICENSE_PATH:./licenses/Aspose.Slides.Java.lic}
app.slide-rendering.aspose.temp-license=true
app.slide-rendering.aspose.scale-factor=2.0
app.slide-rendering.aspose.jpeg-quality=95

# Microsoft Graph API Configuration
app.msgraph.enabled=true
app.msgraph.tenant-id=${AZURE_TENANT_ID:}
app.msgraph.client-id=${AZURE_CLIENT_ID:}
app.msgraph.client-secret=${AZURE_CLIENT_SECRET:}
app.msgraph.scope=https://graph.microsoft.com/.default
app.msgraph.drive-id=${MSGRAPH_DRIVE_ID:}
app.msgraph.site-id=${MSGRAPH_SITE_ID:}
app.msgraph.connect-timeout=30000
app.msgraph.read-timeout=60000
app.msgraph.retry-attempts=3
app.msgraph.retry-delay=1000
app.msgraph.cleanup-enabled=true
app.msgraph.pdf-quality=95

# Spring AI OpenAI Configuration
spring.ai.openai.api-key=${OPENAI_API_KEY:}
spring.ai.openai.chat.options.model=gpt-5-mini-2025-08-07
spring.ai.openai.chat.options.temperature=1
# Note: GPT-5 only supports temperature=1 (default) and uses max_completion_tokens instead of max_tokens

# Multi-Model Configuration
# Vision model for slide analysis (GPT-4o for better vision capabilities)
app.ai.models.vision.model=gpt-4o
app.ai.models.vision.temperature=0.7
app.ai.models.vision.max-tokens=8192

# Text model for deck analysis and narrative generation (GPT-5 for better text generation)
app.ai.models.text.model=gpt-5-mini-2025-08-07
app.ai.models.text.temperature=1
# GPT-5 uses max_completion_tokens instead of max_tokens
app.ai.models.text.max-completion-tokens=16000

# AI Analysis Configuration
app.ai.deck-analysis.enabled=true
app.ai.slide-analysis.enabled=true
app.ai.narrative-generation.enabled=true
app.ai.analysis.timeout-seconds=60
app.ai.analysis.retry-attempts=3
app.ai.analysis.retry-delay-ms=2000

# Parallel Processing Configuration for Slide Analysis
app.ai.analysis.parallel.enabled=true
app.ai.analysis.parallel.max-concurrent=10
app.ai.analysis.parallel.timeout-per-slide-seconds=120
app.ai.analysis.parallel.batch-size=10

# Parallel Processing Configuration for Narrative Generation
app.ai.narrative.parallel.enabled=true
app.ai.narrative.parallel.max-concurrent=10
app.ai.narrative.parallel.timeout-per-slide-seconds=90

# Narrative Optimization Configuration
app.ai.narrative.optimization.enabled=true
app.ai.narrative.optimization.transition.enabled=true
app.ai.narrative.optimization.transition.timeout-seconds=90
app.ai.narrative.optimization.emotional.enabled=true
app.ai.narrative.optimization.emotional.timeout-seconds=90
app.ai.narrative.optimization.tts-engine=elevenlabs

# AI Debug Configuration - Prompt Logging
app.ai.debug.save-prompts=true
app.ai.debug.save-prompts.deck-analysis=true
app.ai.debug.save-prompts.slide-analysis=true
app.ai.debug.save-prompts.narrative-generation=true

# ElevenLabs TTS Configuration
app.elevenlabs.api-key=${ELEVENLABS_API_KEY:}
app.elevenlabs.api-url=https://api.elevenlabs.io/v1
app.elevenlabs.model=eleven_multilingual_v2

# Voice IDs for different narrative styles
app.elevenlabs.voice.business=c6SfcYrb2t09NHXiT80T
app.elevenlabs.voice.funny=cgSgspJ2msm6clMCkdW9  
app.elevenlabs.voice.cynical=50lF5fQMqcxbDQOW6qOs

# Voice settings for natural speech
app.elevenlabs.voice-settings.stability=0.5
app.elevenlabs.voice-settings.similarity-boost=0.75
app.elevenlabs.voice-settings.style=0.5
app.elevenlabs.voice-settings.use-speaker-boost=true

# Output and processing settings
app.elevenlabs.enable-request-stitching=true
app.elevenlabs.output-format=mp3_44100_128

# Cloudflare R2 Configuration
cloudflare.r2.access-key-id=${CLOUDFLARE_R2_ACCESS_KEY_ID}
cloudflare.r2.secret-access-key=${CLOUDFLARE_R2_SECRET_ACCESS_KEY}
cloudflare.r2.endpoint=${CLOUDFLARE_R2_EU_ENDPOINT:https://eu.r2.cloudflarestorage.com}
cloudflare.r2.region=auto
cloudflare.r2.buckets.video-assets.name=video-assets
cloudflare.r2.buckets.video-assets.prefix=assets
cloudflare.r2.buckets.video-generation.name=video-generation
cloudflare.r2.buckets.video-generation.prefix=generated
cloudflare.r2.urls.default-expiration=P7D
cloudflare.r2.urls.max-expiration=P7D

# HeyGen Avatar Video Configuration
heygen.api.key=${HEYGEN_API_KEY:}
heygen.api.base-url=https://api.heygen.com
heygen.api.version=v1
heygen.api.connect-timeout=30000
heygen.api.read-timeout=60000
heygen.api.max-retries=3
heygen.api.retry-delay=2000

# HeyGen Avatar Settings
# heygen.avatar.default-id=Brandon_expressive2_public
# heygen.avatar.business-id=Brandon_expressive2_public
# roeland talking photo
heygen.avatar.default-id=TP-bb450948c12f47d6b2742edc8ebc102e
heygen.avatar.business-id=TP-bb450948c12f47d6b2742edc8ebc102e
heygen.avatar.funny-id=Annelore_public_5
# heygen.avatar.funny-id=Diora_public_3
heygen.avatar.cynical-id=Luca_public
heygen.avatar.background-color=#F5DEB3
heygen.avatar.transparent-background=false

# HeyGen Video Settings
heygen.video.width=1280
heygen.video.height=720
heygen.video.aspect-ratio=16:9
heygen.video.quality=high
heygen.video.test-mode=false
heygen.video.webhook-url=
heygen.video.callback-enabled=false