# Server Configuration
server.port=8080
server.servlet.context-path=/

# Database Configuration
spring.datasource.url=jdbc:postgresql://localhost:5432/ppt2video_poc
spring.datasource.username=ppt2video_db_user
spring.datasource.password=${PPT2VIDEOPOC_DB_PWD}
spring.datasource.driver-class-name=org.postgresql.Driver

# JPA Configuration
spring.jpa.hibernate.ddl-auto=none
spring.jpa.show-sql=false
spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.PostgreSQLDialect
spring.jpa.properties.hibernate.format_sql=true
spring.jpa.properties.hibernate.use_sql_comments=true

# Flyway Configuration
spring.flyway.enabled=true
spring.flyway.baseline-on-migrate=true
spring.flyway.locations=classpath:db/migration
spring.flyway.validate-on-migrate=true

# Connection Pool Configuration (HikariCP)
spring.datasource.hikari.maximum-pool-size=20
spring.datasource.hikari.minimum-idle=5
spring.datasource.hikari.idle-timeout=300000
spring.datasource.hikari.connection-timeout=20000
spring.datasource.hikari.max-lifetime=1200000

# Jackson JSON Configuration
spring.jackson.default-property-inclusion=non_null
spring.jackson.serialization.write-dates-as-timestamps=false
spring.jackson.deserialization.fail-on-unknown-properties=false

# File Upload Configuration
spring.servlet.multipart.enabled=true
spring.servlet.multipart.max-file-size=250MB
spring.servlet.multipart.max-request-size=250MB

# Application File Upload Limits
app.upload.max-file-size=250MB
app.upload.max-file-size-bytes=262144000

# Logging Configuration
logging.level.ai.bluefields.ppt2video=INFO
logging.level.ai.bluefields.ppt2video.service.ai.OpenAIService=TRACE
logging.level.org.springframework.web=INFO
logging.level.org.springframework.ai=DEBUG
logging.level.org.springframework.ai.openai=TRACE
logging.level.org.springframework.retry=DEBUG
logging.level.org.hibernate.SQL=OFF
logging.level.org.hibernate.type.descriptor.sql.BasicBinder=OFF

# Suppress noisy Spring AI auto-configuration warnings
logging.level.org.springframework.ai.model.tool.autoconfigure.ToolCallingAutoConfiguration=WARN

# Application Configuration
app.storage.base-path=./storage
app.storage.presentations-path=${app.storage.base-path}/presentations

# Rendering Configuration
app.rendering.default-width=1920
app.rendering.default-height=1080

# Renderer priority (for slide image generation)
app.slide-rendering.renderer-priority=MSGRAPH,ASPOSE,ENHANCED_POI,DEFAULT_POI

# Parser priority (for PowerPoint content extraction)
app.parser.priority=POI,ASPOSE

# Aspose Configuration (when available/licensed)
app.slide-rendering.aspose.enabled=true
app.slide-rendering.aspose.license-path=${ASPOSE_LICENSE_PATH:./licenses/Aspose.Slides.Java.lic}
app.slide-rendering.aspose.temp-license=true
app.slide-rendering.aspose.scale-factor=2.0
app.slide-rendering.aspose.jpeg-quality=95

# Microsoft Graph API Configuration
app.msgraph.enabled=true
app.msgraph.tenant-id=${AZURE_TENANT_ID:}
app.msgraph.client-id=${AZURE_CLIENT_ID:}
app.msgraph.client-secret=${AZURE_CLIENT_SECRET:}
app.msgraph.scope=https://graph.microsoft.com/.default
app.msgraph.drive-id=${MSGRAPH_DRIVE_ID:}
app.msgraph.site-id=${MSGRAPH_SITE_ID:}
app.msgraph.connect-timeout=30000
app.msgraph.read-timeout=60000
app.msgraph.retry-attempts=3
app.msgraph.retry-delay=1000
app.msgraph.cleanup-enabled=true
app.msgraph.pdf-quality=95

# Spring AI OpenAI Configuration
spring.ai.openai.api-key=${OPENAI_API_KEY:}
spring.ai.openai.chat.options.model=gpt-4o
spring.ai.openai.chat.options.temperature=0.7
spring.ai.openai.chat.options.max-tokens=8192

# AI Analysis Configuration
app.ai.deck-analysis.enabled=true
app.ai.slide-analysis.enabled=true
app.ai.narrative-generation.enabled=true
app.ai.analysis.timeout-seconds=60
app.ai.analysis.retry-attempts=3
app.ai.analysis.retry-delay-ms=2000

# AI Debug Configuration - Prompt Logging
app.ai.debug.save-prompts=true
app.ai.debug.save-prompts.deck-analysis=true
app.ai.debug.save-prompts.slide-analysis=true
app.ai.debug.save-prompts.narrative-generation=true